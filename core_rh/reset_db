import os
import django

# 1. Configura o Django para rodar scripts soltos
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')
django.setup()

from django.db import connection

print("ðŸ’£ INICIANDO DESTRUIÃ‡ÃƒO TOTAL DO BANCO DE DADOS...")

# 2. Conecta no banco e apaga o esquema "public" inteiro
with connection.cursor() as cursor:
    # O CASCADE garante que tudo (tabelas, chaves, sequencias) seja apagado
    cursor.execute("DROP SCHEMA public CASCADE;")
    # Recria o esquema limpo
    cursor.execute("CREATE SCHEMA public;")

print("âœ… SUCESSO! O banco foi zerado.")
print("Agora o Django nÃ£o tem mais histÃ³rico nenhum e vai recriar tudo.")